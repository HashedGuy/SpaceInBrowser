{"ast":null,"code":"function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport React, { Component } from \"react\";\nimport StyleInjector, { lightboxStyles } from \"./styles\";\nimport Header from \"./Header\";\nimport Image from \"./Image\";\n\nvar Lightbox = function (_Component) {\n  _inherits(Lightbox, _Component);\n\n  function Lightbox() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Lightbox);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      move: {\n        x: 0,\n        y: 0\n      },\n      moveStart: undefined,\n      zoomed: false,\n      rotationDeg: 0\n    }, _this.handleKeyDown = function (event) {\n      // ESC or ENTER closes the modal\n      if (event.keyCode === 27 || event.keyCode === 13) {\n        _this.props.onClose();\n      }\n    }, _this.getCoordinatesIfOverImg = function (event) {\n      var point = event.changedTouches ? event.changedTouches[0] : event;\n\n      if (point.target.id !== \"react-modal-image-img\") {\n        // the img was not a target of the coordinates\n        return;\n      }\n\n      var dim = _this.contentEl.getBoundingClientRect();\n\n      var x = point.clientX - dim.left;\n      var y = point.clientY - dim.top;\n      return {\n        x: x,\n        y: y\n      };\n    }, _this.handleMouseDownOrTouchStart = function (event) {\n      event.preventDefault();\n\n      if (event.touches && event.touches.length > 1) {\n        // more than one finger, ignored\n        return;\n      }\n\n      var coords = _this.getCoordinatesIfOverImg(event);\n\n      if (!coords) {\n        // click outside the img => close modal\n        _this.props.onClose();\n      }\n\n      if (!_this.state.zoomed) {\n        // do not allow drag'n'drop if zoom has not been applied\n        return;\n      }\n\n      _this.setState(function (prev) {\n        return {\n          moveStart: {\n            x: coords.x - prev.move.x,\n            y: coords.y - prev.move.y\n          }\n        };\n      });\n    }, _this.handleMouseMoveOrTouchMove = function (event) {\n      event.preventDefault();\n\n      if (!_this.state.zoomed || !_this.state.moveStart) {\n        // do not allow drag'n'drop if zoom has not been applied\n        // or if there has not been a click\n        return;\n      }\n\n      if (event.touches && event.touches.length > 1) {\n        // more than one finger, ignored\n        return;\n      }\n\n      var coords = _this.getCoordinatesIfOverImg(event);\n\n      if (!coords) {\n        return;\n      }\n\n      _this.setState(function (prev) {\n        return {\n          move: {\n            x: coords.x - prev.moveStart.x,\n            y: coords.y - prev.moveStart.y\n          }\n        };\n      });\n    }, _this.handleMouseUpOrTouchEnd = function (event) {\n      _this.setState({\n        moveStart: undefined\n      });\n    }, _this.toggleZoom = function (event) {\n      event.preventDefault();\n\n      _this.setState(function (prev) {\n        return {\n          zoomed: !prev.zoomed,\n          // reset position if zoomed out\n          move: prev.zoomed ? {\n            x: 0,\n            y: 0\n          } : prev.move\n        };\n      });\n    }, _this.toggleRotate = function (event) {\n      event.preventDefault();\n      var rotationDeg = _this.state.rotationDeg;\n\n      if (rotationDeg === 360) {\n        _this.setState({\n          rotationDeg: 90\n        });\n\n        return;\n      }\n\n      _this.setState(function (prevState) {\n        return {\n          rotationDeg: prevState.rotationDeg += 90\n        };\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Lightbox.prototype.componentDidMount = function componentDidMount() {\n    document.addEventListener(\"keydown\", this.handleKeyDown, false);\n  };\n\n  Lightbox.prototype.componentWillUnmount = function componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.handleKeyDown, false);\n  };\n\n  Lightbox.prototype.render = function render() {\n    var _this2 = this;\n\n    var _props = this.props,\n        medium = _props.medium,\n        large = _props.large,\n        alt = _props.alt,\n        onClose = _props.onClose,\n        hideDownload = _props.hideDownload,\n        hideZoom = _props.hideZoom,\n        showRotate = _props.showRotate,\n        _props$imageBackgroun = _props.imageBackgroundColor,\n        imageBackgroundColor = _props$imageBackgroun === undefined ? \"black\" : _props$imageBackgroun;\n    var _state = this.state,\n        move = _state.move,\n        zoomed = _state.zoomed,\n        rotationDeg = _state.rotationDeg;\n    return React.createElement(\"div\", null, React.createElement(StyleInjector, {\n      name: \"__react_modal_image__lightbox\",\n      css: lightboxStyles({\n        imageBackgroundColor: imageBackgroundColor\n      })\n    }), React.createElement(\"div\", {\n      className: \"__react_modal_image__modal_container\"\n    }, React.createElement(\"div\", {\n      className: \"__react_modal_image__modal_content\",\n      onMouseDown: this.handleMouseDownOrTouchStart,\n      onMouseUp: this.handleMouseUpOrTouchEnd,\n      onMouseMove: this.handleMouseMoveOrTouchMove,\n      onTouchStart: this.handleMouseDownOrTouchStart,\n      onTouchEnd: this.handleMouseUpOrTouchEnd,\n      onTouchMove: this.handleMouseMoveOrTouchMove,\n      ref: function ref(el) {\n        _this2.contentEl = el;\n      }\n    }, zoomed && React.createElement(Image, {\n      id: \"react-modal-image-img\",\n      className: \"__react_modal_image__large_img\",\n      src: large || medium,\n      style: {\n        transform: \"translate3d(-50%, -50%, 0) translate3d(\" + move.x + \"px, \" + move.y + \"px, 0) rotate(\" + rotationDeg + \"deg)\",\n        WebkitTransform: \"translate3d(-50%, -50%, 0) translate3d(\" + move.x + \"px, \" + move.y + \"px, 0) rotate(\" + rotationDeg + \"deg)\",\n        MsTransform: \"translate3d(-50%, -50%, 0) translate3d(\" + move.x + \"px, \" + move.y + \"px, 0) rotate(\" + rotationDeg + \"deg)\"\n      },\n      handleDoubleClick: this.toggleZoom\n    }), !zoomed && React.createElement(Image, {\n      id: \"react-modal-image-img\",\n      className: \"__react_modal_image__medium_img\",\n      src: medium || large,\n      handleDoubleClick: this.toggleZoom,\n      contextMenu: !medium,\n      style: {\n        transform: \"translate3d(-50%, -50%, 0) rotate(\" + rotationDeg + \"deg)\",\n        WebkitTransform: \"translate3d(-50%, -50%, 0) rotate(\" + rotationDeg + \"deg)\",\n        MsTransform: \"translate3d(-50%, -50%, 0) rotate(\" + rotationDeg + \"deg)\"\n      }\n    })), React.createElement(Header, {\n      image: large || medium,\n      alt: alt,\n      zoomed: zoomed,\n      toggleZoom: this.toggleZoom,\n      toggleRotate: this.toggleRotate,\n      onClose: onClose,\n      enableDownload: !hideDownload,\n      enableZoom: !hideZoom,\n      enableRotate: !!showRotate\n    })));\n  };\n\n  return Lightbox;\n}(Component);\n\nexport { Lightbox as default };","map":{"version":3,"sources":["/Users/arbus/Documents/SpaceInBrowser/node_modules/react-modal-image-responsive/es/Lightbox.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","React","Component","StyleInjector","lightboxStyles","Header","Image","Lightbox","_Component","_temp","_this","_ret","_len","arguments","length","args","Array","_key","apply","concat","state","move","x","y","moveStart","undefined","zoomed","rotationDeg","handleKeyDown","event","keyCode","props","onClose","getCoordinatesIfOverImg","point","changedTouches","target","id","dim","contentEl","getBoundingClientRect","clientX","left","clientY","top","handleMouseDownOrTouchStart","preventDefault","touches","coords","setState","prev","handleMouseMoveOrTouchMove","handleMouseUpOrTouchEnd","toggleZoom","toggleRotate","prevState","componentDidMount","document","addEventListener","componentWillUnmount","removeEventListener","render","_this2","_props","medium","large","alt","hideDownload","hideZoom","showRotate","_props$imageBackgroun","imageBackgroundColor","_state","createElement","name","css","className","onMouseDown","onMouseUp","onMouseMove","onTouchStart","onTouchEnd","onTouchMove","ref","el","src","style","transform","WebkitTransform","MsTransform","handleDoubleClick","contextMenu","image","enableDownload","enableZoom","enableRotate","default"],"mappings":"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","sourcesContent":["function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport React, { Component } from \"react\";\n\nimport StyleInjector, { lightboxStyles } from \"./styles\";\n\nimport Header from \"./Header\";\nimport Image from \"./Image\";\n\nvar Lightbox = function (_Component) {\n  _inherits(Lightbox, _Component);\n\n  function Lightbox() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Lightbox);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n      move: { x: 0, y: 0 },\n      moveStart: undefined,\n      zoomed: false,\n      rotationDeg: 0\n    }, _this.handleKeyDown = function (event) {\n      // ESC or ENTER closes the modal\n      if (event.keyCode === 27 || event.keyCode === 13) {\n        _this.props.onClose();\n      }\n    }, _this.getCoordinatesIfOverImg = function (event) {\n      var point = event.changedTouches ? event.changedTouches[0] : event;\n\n      if (point.target.id !== \"react-modal-image-img\") {\n        // the img was not a target of the coordinates\n        return;\n      }\n\n      var dim = _this.contentEl.getBoundingClientRect();\n      var x = point.clientX - dim.left;\n      var y = point.clientY - dim.top;\n\n      return { x: x, y: y };\n    }, _this.handleMouseDownOrTouchStart = function (event) {\n      event.preventDefault();\n\n      if (event.touches && event.touches.length > 1) {\n        // more than one finger, ignored\n        return;\n      }\n\n      var coords = _this.getCoordinatesIfOverImg(event);\n\n      if (!coords) {\n        // click outside the img => close modal\n        _this.props.onClose();\n      }\n\n      if (!_this.state.zoomed) {\n        // do not allow drag'n'drop if zoom has not been applied\n        return;\n      }\n\n      _this.setState(function (prev) {\n        return {\n          moveStart: {\n            x: coords.x - prev.move.x,\n            y: coords.y - prev.move.y\n          }\n        };\n      });\n    }, _this.handleMouseMoveOrTouchMove = function (event) {\n      event.preventDefault();\n\n      if (!_this.state.zoomed || !_this.state.moveStart) {\n        // do not allow drag'n'drop if zoom has not been applied\n        // or if there has not been a click\n        return;\n      }\n\n      if (event.touches && event.touches.length > 1) {\n        // more than one finger, ignored\n        return;\n      }\n\n      var coords = _this.getCoordinatesIfOverImg(event);\n\n      if (!coords) {\n        return;\n      }\n\n      _this.setState(function (prev) {\n        return {\n          move: {\n            x: coords.x - prev.moveStart.x,\n            y: coords.y - prev.moveStart.y\n          }\n        };\n      });\n    }, _this.handleMouseUpOrTouchEnd = function (event) {\n      _this.setState({\n        moveStart: undefined\n      });\n    }, _this.toggleZoom = function (event) {\n      event.preventDefault();\n      _this.setState(function (prev) {\n        return {\n          zoomed: !prev.zoomed,\n          // reset position if zoomed out\n          move: prev.zoomed ? { x: 0, y: 0 } : prev.move\n        };\n      });\n    }, _this.toggleRotate = function (event) {\n      event.preventDefault();\n\n      var rotationDeg = _this.state.rotationDeg;\n\n\n      if (rotationDeg === 360) {\n        _this.setState({ rotationDeg: 90 });\n        return;\n      }\n\n      _this.setState(function (prevState) {\n        return {\n          rotationDeg: prevState.rotationDeg += 90\n        };\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  Lightbox.prototype.componentDidMount = function componentDidMount() {\n    document.addEventListener(\"keydown\", this.handleKeyDown, false);\n  };\n\n  Lightbox.prototype.componentWillUnmount = function componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.handleKeyDown, false);\n  };\n\n  Lightbox.prototype.render = function render() {\n    var _this2 = this;\n\n    var _props = this.props,\n        medium = _props.medium,\n        large = _props.large,\n        alt = _props.alt,\n        onClose = _props.onClose,\n        hideDownload = _props.hideDownload,\n        hideZoom = _props.hideZoom,\n        showRotate = _props.showRotate,\n        _props$imageBackgroun = _props.imageBackgroundColor,\n        imageBackgroundColor = _props$imageBackgroun === undefined ? \"black\" : _props$imageBackgroun;\n    var _state = this.state,\n        move = _state.move,\n        zoomed = _state.zoomed,\n        rotationDeg = _state.rotationDeg;\n\n\n    return React.createElement(\n      \"div\",\n      null,\n      React.createElement(StyleInjector, {\n        name: \"__react_modal_image__lightbox\",\n        css: lightboxStyles({ imageBackgroundColor: imageBackgroundColor })\n      }),\n      React.createElement(\n        \"div\",\n        { className: \"__react_modal_image__modal_container\" },\n        React.createElement(\n          \"div\",\n          {\n            className: \"__react_modal_image__modal_content\",\n            onMouseDown: this.handleMouseDownOrTouchStart,\n            onMouseUp: this.handleMouseUpOrTouchEnd,\n            onMouseMove: this.handleMouseMoveOrTouchMove,\n            onTouchStart: this.handleMouseDownOrTouchStart,\n            onTouchEnd: this.handleMouseUpOrTouchEnd,\n            onTouchMove: this.handleMouseMoveOrTouchMove,\n            ref: function ref(el) {\n              _this2.contentEl = el;\n            }\n          },\n          zoomed && React.createElement(Image, {\n            id: \"react-modal-image-img\",\n            className: \"__react_modal_image__large_img\",\n            src: large || medium,\n            style: {\n              transform: \"translate3d(-50%, -50%, 0) translate3d(\" + move.x + \"px, \" + move.y + \"px, 0) rotate(\" + rotationDeg + \"deg)\",\n              WebkitTransform: \"translate3d(-50%, -50%, 0) translate3d(\" + move.x + \"px, \" + move.y + \"px, 0) rotate(\" + rotationDeg + \"deg)\",\n              MsTransform: \"translate3d(-50%, -50%, 0) translate3d(\" + move.x + \"px, \" + move.y + \"px, 0) rotate(\" + rotationDeg + \"deg)\"\n            },\n            handleDoubleClick: this.toggleZoom\n          }),\n          !zoomed && React.createElement(Image, {\n            id: \"react-modal-image-img\",\n            className: \"__react_modal_image__medium_img\",\n            src: medium || large,\n            handleDoubleClick: this.toggleZoom,\n            contextMenu: !medium,\n            style: {\n              transform: \"translate3d(-50%, -50%, 0) rotate(\" + rotationDeg + \"deg)\",\n              WebkitTransform: \"translate3d(-50%, -50%, 0) rotate(\" + rotationDeg + \"deg)\",\n              MsTransform: \"translate3d(-50%, -50%, 0) rotate(\" + rotationDeg + \"deg)\"\n            }\n          })\n        ),\n        React.createElement(Header, {\n          image: large || medium,\n          alt: alt,\n          zoomed: zoomed,\n          toggleZoom: this.toggleZoom,\n          toggleRotate: this.toggleRotate,\n          onClose: onClose,\n          enableDownload: !hideDownload,\n          enableZoom: !hideZoom,\n          enableRotate: !!showRotate\n        })\n      )\n    );\n  };\n\n  return Lightbox;\n}(Component);\n\nexport { Lightbox as default };"]},"metadata":{},"sourceType":"module"}